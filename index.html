<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Karen">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Karen">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Karen">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Karen</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Karen</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/07/mysql数据库CRUD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/07/mysql数据库CRUD/" itemprop="url">mysql数据库CRUD</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-07T19:51:56+08:00">
                2018-08-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="mysql数据库CRUD"><a href="#mysql数据库CRUD" class="headerlink" title="mysql数据库CRUD"></a>mysql数据库CRUD</h3><p>​    本文从基础开始介绍mysql数据库的增删改查等基础知识</p>
<h4 id="下载安装mysql数据库"><a href="#下载安装mysql数据库" class="headerlink" title="下载安装mysql数据库"></a>下载安装mysql数据库</h4><h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><ol>
<li><p>services.msg</p>
</li>
<li><p>管理——&gt;服务——&gt;启动mysql</p>
</li>
<li><p>cmd——&gt;net start mysql</p>
</li>
<li><p>偏好设置——&gt;run（Mac）</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/07/网络爬虫1-http协议和urllib/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/07/网络爬虫1-http协议和urllib/" itemprop="url">网络爬虫1--http协议和urllib</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-07T19:39:35+08:00">
                2018-08-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="爬虫初步"><a href="#爬虫初步" class="headerlink" title="爬虫初步"></a>爬虫初步</h3><h4 id="爬虫概念"><a href="#爬虫概念" class="headerlink" title="爬虫概念"></a>爬虫概念</h4><h5 id="都有哪些语言可以实现爬虫"><a href="#都有哪些语言可以实现爬虫" class="headerlink" title="都有哪些语言可以实现爬虫"></a>都有哪些语言可以实现爬虫</h5><p>​    （1）php, 号称世界上最好的语言，可以实现爬虫，但做的不好，天生对多进程和多线程支持的不好</p>
<p>​    （2）java，可以实现，而且做的非常好，是python爬虫最主要的竞争对手, 但语言不简洁，代码臃肿，重构成本高<br>    （3）c、c++，也可以实现爬虫，非常强大，但是不是一个好的选择<br>    （4）python，可以实现，号称世界上最优雅的语言，代码简洁，学习成本低，执行效率也好，而且还有一个非常强大的爬虫框架   scrapy</p>
<h4 id="通用爬虫"><a href="#通用爬虫" class="headerlink" title="通用爬虫"></a>通用爬虫</h4><p>​        例子：百度、谷歌、360、搜狗、必应等等，搜索引擎</p>
<p>​        工作：<br>            （1）爬取互联网所有的数据<br>            （2）对数据存储并且处理<br>            （3）给用户提供检索服务<br>        如何让百度抓取你的网站？<br>            （1）静静地等待，百度会和DNS服务商合作<br>            （2）主动提交自己的url<br>            （3）在其它网站设置友情链接<br>        我的网站不想让百度抓取？<br>            君子协议，口头协议，robots协议<br>            存放到网站的根目录下，限制搜索引擎可以爬取哪些，不可以爬取哪些</p>
<pre><code>##### 如何提升网站排名（SEO）
</code></pre><p>​            （1）pagerank值排名，根据点击量、浏览量等，相当靠谱</p>
<p>​            （2）竞价排名</p>
<pre><code>##### 通用爬虫缺点：
</code></pre><p>​            （1）抓取很多数据都是无效的</p>
<p>​            （2）不能根据自己的需求抓取数据</p>
<h4 id="聚焦爬虫"><a href="#聚焦爬虫" class="headerlink" title="聚焦爬虫"></a>聚焦爬虫</h4><p>​        根据自己特定的需求，来抓取指定的数据</p>
<p>​        如何实现聚焦爬虫？<br>        网页的特点：<br>        （1）网页都有自己唯一的url<br>        （2）网页都是由html组成<br>        （3）网页传输都是使用http、https协议</p>
<h5 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h5><p>​    （1）给一个url</p>
<p>​    （2）模拟浏览器发送http请求<br>    （3）从html结构中提取指定的数据，从字符串中根据规则提取指定数据</p>
<h5 id="开发环境："><a href="#开发环境：" class="headerlink" title="开发环境："></a>开发环境：</h5><p>​        windows系统，python3.x（64位），sublime编辑器，pycharm，vscode</p>
<h4 id="整体内容："><a href="#整体内容：" class="headerlink" title="整体内容："></a>整体内容：</h4><p>​        （1）涉及到的python库</p>
<p>​            urllib,requests,selenium,jsonpath,lxml等一些库<br>        （2）解析内容<br>            正则表达式解析，bs4解析，xpath解析，jsonpath解析<br>        （3）采集动态html<br>            DOM操作，动态的添加或者删除节点，selenium+phantomjs<br>        （4）scrapy框架<br>            异步高性能网络爬虫框架的学习<br>        （5）scrapy-redis分布式部署<br>            在scrapy的基础上，多了一套分布式部署的组件<br>        （6）涉及到的爬虫-反爬虫-反反爬虫之间的斗争<br>            反爬会伤害真实的用户，一般情况下，反爬也就这么两点：第一个UA，第二个封ip，第三个验证码，光学识别，打码平台<br>            换思路解决问题：其他网站，手机端等</p>
<h4 id="关于http协议"><a href="#关于http协议" class="headerlink" title="关于http协议"></a>关于http协议</h4><h4 id="http和https的区别"><a href="#http和https的区别" class="headerlink" title="http和https的区别"></a>http和https的区别</h4><p>​        HTTPS和HTTP的区别主要如下：<br>    　　1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。<br>    　　2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。<br>    　　3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。<br>    　　4、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。</p>
<h4 id="加密：公钥私钥"><a href="#加密：公钥私钥" class="headerlink" title="加密：公钥私钥"></a>加密：公钥私钥</h4><p>​        客户端：123456用秘钥加密=======》服务端：用秘钥解密得到123456<br>            秘钥相同称之为对称加解密<br>            秘钥不相同称之为非对称加解密<br>        客户端：123456用公钥加密=======》服务端：用私钥解密得到123456<br>    http协议学习：</p>
<h4 id="请求：包含请求行、请求头、请求内容"><a href="#请求：包含请求行、请求头、请求内容" class="headerlink" title="请求：包含请求行、请求头、请求内容"></a>请求：包含请求行、请求头、请求内容</h4><p>请求行：请求方式、请求资源、协议版本号</p>
<p>请求头：</p>
<ul>
<li><p>accept:浏览器通过这个头告诉服务器，它所支持的数据类型</p>
</li>
<li><p>Accept-Charset: 浏览器通过这个头告诉服务器，它支持哪种字符集</p>
</li>
<li><p>Accept-Encoding：浏览器通过这个头告诉服务器，支持的压缩格式</p>
</li>
<li><p>Accept-Language：浏览器通过这个头告诉服务器，它的语言环境</p>
</li>
<li><p>Host：浏览器通过这个头告诉服务器，想访问哪台主机<br>If-Modified-Since: 浏览器通过这个头告诉服务器，缓存数据的时间        　</p>
</li>
<li><p>Referer：浏览器通过这个头告诉服务器，客户机是哪个页面来的  防盗链</p>
</li>
<li><p>Connection：浏览器通过这个头告诉服务器，请求完后是断开链接还是何持链接</p>
</li>
<li><p>X-Requested-With: XMLHttpRequest  代表是ajax的请求</p>
<h4 id="响应：响应行、响应头、响应内容"><a href="#响应：响应行、响应头、响应内容" class="headerlink" title="响应：响应行、响应头、响应内容"></a>响应：响应行、响应头、响应内容</h4></li>
</ul>
<h5 id="响应行里面，常见的状态码"><a href="#响应行里面，常见的状态码" class="headerlink" title="响应行里面，常见的状态码"></a>响应行里面，常见的状态码</h5><ul>
<li><p>200：请求成功 处理方式：获得响应的内容，进行处理</p>
</li>
<li><p>301：请求到的资源都会分配一个永久的URL，这样就可以在将来通过该URL来访问此资源 处理方式：重定向到分配的URL</p>
</li>
<li><p>302：请求到的资源在一个不同的URL处临时保存 处理方式：重定向到临时的URL</p>
</li>
<li><p>304：请求的资源未更新 处理方式：丢弃，使用本地缓存文件</p>
</li>
<li><p>403：禁止 处理方式：丢弃</p>
</li>
<li><p>404：没有找到 处理方式：丢弃</p>
</li>
<li><p>405：请求方式不对</p>
</li>
<li><p>500：服务器内部错误 服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。一般来说，这个问题都会在服务器端的源代码出现错误时出现。</p>
</li>
</ul>
<h4 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h4><p>Location: 服务器通过这个头，来告诉浏览器跳到哪里</p>
<ul>
<li><p>Server：服务器通过这个头，告诉浏览器服务器的型号</p>
</li>
<li><p>Content-Encoding：服务器通过这个头，告诉浏览器，数据的压缩格式</p>
</li>
<li><p>Content-Length: 服务器通过这个头，告诉浏览器回送数据的长度</p>
</li>
<li><p>Content-Language: 服务器通过这个头，告诉浏览器语言环境</p>
</li>
<li><p>Content-Type：服务器通过这个头，告诉浏览器回送数据的类型</p>
</li>
<li><p>Refresh：服务器通过这个头，告诉浏览器定时刷新</p>
</li>
<li><p>Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式打数据</p>
</li>
<li><p>Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的</p>
</li>
<li><p>Expires: -1  控制浏览器不要缓存</p>
</li>
<li><p>Cache-Control: no-cache  </p>
</li>
<li><p>Pragma: no-cache</p>
</li>
</ul>
<h4 id="响应内容：html、css、js、图片"><a href="#响应内容：html、css、js、图片" class="headerlink" title="响应内容：html、css、js、图片"></a>响应内容：html、css、js、图片</h4><h4 id="抓包工具"><a href="#抓包工具" class="headerlink" title="抓包工具"></a>抓包工具</h4><p>（1）谷歌浏览器自带抓包工具<br>    右键开发者工具==》network<br>    XHR: XMLHttpReqeust  前端要想发送ajax请求，通过它创建对象，发送请求<br>    query_string_parameters : 请求字符串，get参数<br>    formdata ： 如果是post参数<br>（2）专业工具，fiddler，charles……<br>    专业抓包工具，比谷歌强在了跳转的时候很多请求都能抓取到<br>    前端要像发送ajax请求，创建对象调用对象方法需要通过XHR</p>
<h4 id="urllib库"><a href="#urllib库" class="headerlink" title="urllib库"></a>urllib库</h4><p>​    urllib库是自带的python库，模拟发送http请求<br>    在python 2系列中使用：urllib  urllib2<br>    在python 3系列中使用：urllib  </p>
<h4 id="urllib库的使用"><a href="#urllib库的使用" class="headerlink" title="urllib库的使用"></a>urllib库的使用</h4><ol>
<li><p>urllib.request  模拟发送请求</p>
<ul>
<li><p>urlopen(url) : 向url发送请求，得到响应对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">url = <span class="string">'http://www.baidu.com/'</span></span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line"></span><br><span class="line">print(response)</span><br><span class="line">print(response.read())</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<p>   可以看到结果如下：</p>
<p>   <img src="/Users/lilamei/blog/hexo/source/_posts/网络爬虫1-http协议和urllib/urllib.request.urlopen-result.png" alt="urllib.request.urlopen-result"></p>
<ul>
<li><p>print(response.read().decode(‘utf8’))：得到了二进制的格式，下一步我们需要使用decode将二进制格式解码为字符串格式</p>
<h5 id="response属性和方法"><a href="#response属性和方法" class="headerlink" title="response属性和方法"></a>response属性和方法</h5></li>
<li><p>print(response.url)：拿到请求的url</p>
</li>
<li><p>print(response.headers)：拿到请求的headers</p>
</li>
<li><p>print(response.status)：拿到请求的状态码</p>
</li>
<li><p>urllib.parse: 处理参数或者url</p>
</li>
<li><p>urllib.error:  如何处理异常</p>
</li>
</ul>
<h5 id="保存到文件"><a href="#保存到文件" class="headerlink" title="保存到文件"></a>保存到文件</h5><p>​    将抓取的数据保存到文件有两种方式：</p>
<p>第一种方式：通过with打开文件（注意统一编码格式）</p>
<ol>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将获取的响应内容保存到文件中</span></span><br><span class="line"><span class="comment"># with open('baidu1.html', 'a', encoding='utf8') as fp:</span></span><br><span class="line"><span class="comment">#     fp.write(response.read().decode('utf8'))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以二进制的格式保存</span></span><br><span class="line"><span class="comment"># with open('baidu2.html', 'wb') as fp:</span></span><br><span class="line"><span class="comment"># fp.write(response.read())</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>第二种方式：直接以二进制的格式写入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实现发送请求，将内容写入文件</span></span><br><span class="line"><span class="comment"># urllib.request.urlretrieve(url, 'baidu3.html')</span></span><br></pre></td></tr></table></figure>
<ul>
<li><ul>
<li>urlretrieve(url, filepath) ： 向url发送请求，直接将响应写入到filepath中</li>
</ul>
</li>
<li><p>编码：</p>
<ul>
<li><p>字符串格式==》字节格式</p>
<p>encode(‘utf8’)</p>
</li>
<li><p>字节格式==》字符串格式</p>
<p>decode(‘gbk’)</p>
</li>
</ul>
</li>
</ul>
<h5 id="爬取图片的保存"><a href="#爬取图片的保存" class="headerlink" title="爬取图片的保存"></a>爬取图片的保存</h5><p>​    下载图片：得到图片的src属性，就可以将图片下载到本地</p>
<p>​    有两种方式，主要是对图片是做二进制的处理:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1533639915215&amp;di=1bbd3901c9991b363ac0211dc861a909&amp;imgtype=0&amp;src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F225a5f3f75d1d4c59532704782eebd25d323fd801e57a-VlY5c4_fw658'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一种方式，发送请求，获取响应</span></span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'meinv.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> fp:</span><br><span class="line"></span><br><span class="line">	fp.write(response.read())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种方式，</span></span><br><span class="line"></span><br><span class="line">urllib.request.urlretrieve(url, <span class="string">'meinv2.png'</span>)</span><br></pre></td></tr></table></figure>
<p>​    </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/30/爬虫-url/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/30/爬虫-url/" itemprop="url">爬虫-url</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-30T11:32:57+08:00">
                2018-07-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>urllib是python内置的HTTP请求库，包含以下4个模块：</p>
<ul>
<li>request：请求模块，模拟发送请求，需要给库方法传入url</li>
<li>error：异常处理模块，如果出现错误可以捕获，进行重试或其他操作</li>
<li>parse：工具模块，提供给了很多url处理方法，比如拆分，解析，合并等</li>
<li>rotbotparser：识别网站的robot.txt文件</li>
</ul>
<h3 id="urlopen（）"><a href="#urlopen（）" class="headerlink" title="urlopen（）"></a>urlopen（）</h3><p>请求方法：</p>
<p>response = urllib.request.urlopen(‘<a href="https://www.python.org&#39;" target="_blank" rel="noopener">https://www.python.org&#39;</a>)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/关系型数据库MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/关系型数据库MySQL/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T09:16:20+08:00">
                2018-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="关系型数据入门"><a href="#关系型数据入门" class="headerlink" title="关系型数据入门"></a>关系型数据入门</h2><h3 id="关系型数据概述"><a href="#关系型数据概述" class="headerlink" title="关系型数据概述"></a>关系型数据概述</h3><ol>
<li>数据持久化。</li>
<li>数据库发展史。</li>
<li>关系型数据库特点。</li>
<li>E-R图。</li>
<li>关系型数据库产品。</li>
</ol>
<h3 id="MySQL简介"><a href="#MySQL简介" class="headerlink" title="MySQL简介"></a>MySQL简介</h3><p>1.为什么要使用关系型数据库：见特点</p>
<p>2.关系型数据库的三个特点：</p>
<ul>
<li><p>集合论加关系代数</p>
</li>
<li><p>用二维表承载数据，有行有列</p>
</li>
<li><p>编程语言sql，ddl，dml，dql，dcl</p>
<p>####mysql的特点：</p>
<p>比非关系型数据库，在数据强一致性和安全性方面，或者对于数据要求特别高的（比如金融机构等），mysql数据库在底层有锁机制，能够更好的保存，管理数据。</p>
<p>windows下面是默认的是150个链接</p>
<p>Linux系统可以配置链接客户端数量，改配置文件</p>
<h4 id="开启事务"><a href="#开启事务" class="headerlink" title="开启事务"></a>开启事务</h4><p>1.敲begin;或者start transaction;开启事务环境，可以回滚，提交commit后是真正删除。事务环境要么全成功，要么全失败</p>
<p>2.只能一个用户操作这一行，排他锁，排队操作，不一定是行级锁，有可能是整个表，但读取数据时是使用的共享锁，都可以读；</p>
<p>3.如果希望读数据的时候也用排他锁:begin;查询语句后面加for update;</p>
<p>select * from tbdept for update,另一用户也在事务环境中for update</p>
<h4 id="事务隔离级别，事务传播级别"><a href="#事务隔离级别，事务传播级别" class="headerlink" title="事务隔离级别，事务传播级别"></a>事务隔离级别，事务传播级别</h4></li>
</ul>
<ol>
<li>安装和配置。</li>
<li>常用命令。</li>
</ol>
<h3 id="SQL详解"><a href="#SQL详解" class="headerlink" title="SQL详解"></a>SQL详解</h3><ol>
<li>DDL</li>
<li>DML</li>
<li>DQL</li>
</ol>
<h3 id="Python数据库编程"><a href="#Python数据库编程" class="headerlink" title="Python数据库编程"></a>Python数据库编程</h3><p>#####MySQLdb</p>
<p>在python2中使用，目前在python3中使用的是PyMySQL</p>
<p>#####PyMySQL</p>
<p>能够对数据进行CRUD操作</p>
<p>####Linux系统下安装mysql：</p>
<ul>
<li>使用rpm包管理工具（redhat包管理工具）</li>
</ul>
<ul>
<li><p>安装：ls  | xargs rpm -ivh</p>
</li>
<li><p>卸载：rpm -qa | grep mysql | xargs rpm -e</p>
</li>
<li><p>改配置：vim /etc/my.conf</p>
<p>​    绑定ip地址：bind-address=</p>
<p>​    绑定端口：port=</p>
<p>​    指定最大链接数：max_connections=</p>
<p>​    不输密码就可以登录：skip-grant-tables</p>
<p>在centos7下:</p>
</li>
<li><p>启动：systemctl start mysqld</p>
</li>
<li><p>状态：systemctl status mysqld</p>
</li>
<li><p>开机自启：systemctl enable mysqld</p>
</li>
<li><p>查看是否启动（进程）：ps -ef | grep mysqld</p>
</li>
<li><p>查看端口是否被占用：netstat -nap | grep 3306</p>
</li>
</ul>
<p>####mysql的客户端工具的使用</p>
<ul>
<li><p>mysql -u root-p :本机进到客户端工具</p>
</li>
<li><p>mysql -u root -h (地址) -p：链接远端</p>
</li>
<li><p>查看帮助信息</p>
<p>查看帮助信息：?  contents</p>
<p>查看数据类型：? data types</p>
<p>查看整数：? int</p>
<p>查看show这个命令怎么用：? show</p>
</li>
</ul>
<p>####SQL </p>
<ol>
<li><p>DDL</p>
<p>create / drop / alter</p>
</li>
<li><p>DML</p>
<p>insert / delete / update</p>
</li>
<li><p>DQL</p>
<p>select /    as / where / like / regexp /group by / order by asc/desc</p>
</li>
<li><p>DCL</p>
<p>grant(授权) / revoke(召回权限) / begin / commit / rollback</p>
<p>​</p>
</li>
</ol>
<p>####Python —&gt;MySQL</p>
<h5 id="PyMySQL的使用"><a href="#PyMySQL的使用" class="headerlink" title="PyMySQL的使用"></a>PyMySQL的使用</h5><ul>
<li><p>创建链接，connect创建链接对象</p>
</li>
<li><p>打开数据库连接</p>
</li>
<li><p>运用pymysql里面的connet方法</p>
</li>
<li><p>db = pymysql.connect(“localhost”,”testuser”,”test123”,”TESTDB” )</p>
</li>
<li><p>服务器（云就写公网），用户名，密码，数据库名字</p>
</li>
<li><p>编码黑洞：拉丁一语系的编码，就是存不下，全是问号，还原不了（乱码可以还原）</p>
<p>​    big5：大5码，繁体中文</p>
<p>​    gb2312:国标扩</p>
<p>​    gb18030：国标，少数民族也可以</p>
<p>​    latin1:iso-8859-1：默认选择了拉丁一语系编码，造成编码黑洞</p>
</li>
<li><p>cursor:读取数据可以滑动</p>
</li>
</ul>
<ul>
<li><p>使用 cursor() 方法创建一个游标对象connection </p>
<p>​    pymysql.connext(host……)</p>
</li>
<li><p>cursor指定host，port(默认3306，当默认时可不写)，user，passwd（password） db(database),charset.</p>
</li>
</ul>
<ul>
<li>cursor.execute()执行</li>
</ul>
<ul>
<li>cursor.fetchall()：拿所有</li>
</ul>
<ul>
<li><p>fetchone()：拿一条</p>
</li>
<li><p>cursor.rowcount</p>
<p>​    cursor = db.cursor()</p>
</li>
<li><p>查询时转换成字典:cursorclass=DictCursor</p>
</li>
<li><p>查询时别名</p>
</li>
<li><p>手动提交:commit()</p>
</li>
<li><p>自动提交:autocommit=True</p>
</li>
<li><p>装的时候叫pillow，用的时候交PIL</p>
</li>
</ul>
<p>####pycharm中库或者插件安装办法：</p>
<ul>
<li>​    红灯泡自动修复错误<br>   ​    终端<br>   ​    +号安装</li>
</ul>
<p>安装虚拟环境：virtualenv –no-site-package venv</p>
<p>6.28</p>
<p>在函数中如何拿到链接mysql数据库的方法：</p>
<ul>
<li><p>第一种方式：将连接语句设置为全局变量,全局作用域，这是非常不好的做法，因为全局变量的影响范围太广，有时无法有效控制</p>
<p>语法：global con</p>
</li>
<li><p>第二种方式：将连接语句使用参数传递给需要使用的方法中</p>
<p>语法：add_new_contacter(con)</p>
</li>
</ul>
<p>抽取常量</p>
<p>####sql语句：limit %s offset %s</p>
<p>含义：查看多少条；从第几条开始，（跳过几条），</p>
<p>查看数量，偏移量，</p>
<p>####类：enumerate</p>
<p>for index, row in enumerate(cursor.fetchall()):   ？？？</p>
<p>显示一个编号，for循环在range中有编号，自定义的列表是没有编号的</p>
<p>####关于安全占位符</p>
<p>安全在于，它会自动补全引号。只有一个占位符也是传递元组，安全占位符only接收元组</p>
<p>#####复用代码的最佳方式：封装，写成类或者函数</p>
<p>####作用域：</p>
<ul>
<li>LEGB的查找方式：</li>
<li>global和nonlocal两层含义：用全局中的（修改也是），第二是全局没有它放到全局中</li>
</ul>
<p>####面向对象</p>
<ul>
<li><p>数据抽象：属性（名词）</p>
<pre><code>初始化方法绑定属性
</code></pre></li>
<li><p>行为抽象：方法（动词）</p>
<pre><code>花括号占位符
</code></pre></li>
</ul>
<p>三种创建方式：</p>
<ol>
<li><p>三步走：定义类，创建对象，调用对象（给对象发消息）</p>
</li>
<li><p>两步走：创建对象，给对象发消息</p>
</li>
<li><p>一步走：给对象发消息（document对象，window对象）</p>
<p>​</p>
</li>
</ol>
<p>#####怎么把将字典变成对象</p>
<p>​    创建对象：构造器，跟类名完全一致,调构造器时会自动初始化，需要传参，将字典传入关键字参数</p>
<p>​    将字典处理成关键字参数传入构造器</p>
<h3 id="ORM概述"><a href="#ORM概述" class="headerlink" title="ORM概述"></a>ORM概述</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/关于使用git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/关于使用git/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T09:16:20+08:00">
                2018-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="关于使用git"><a href="#关于使用git" class="headerlink" title="关于使用git"></a>关于使用git</h3><h3 id="git本地"><a href="#git本地" class="headerlink" title="git本地"></a>git本地</h3><h4 id="下载并安装git"><a href="#下载并安装git" class="headerlink" title="下载并安装git"></a>下载并安装git</h4><h4 id="创建git版本库"><a href="#创建git版本库" class="headerlink" title="创建git版本库"></a>创建git版本库</h4><ol>
<li>新建空目录</li>
<li>初始化仓库：git init</li>
<li>添加到仓库 :git add filename</li>
<li><p>将文件提交到仓库: git commit -m “wrote a  file”</p>
<pre><code>commi可以一次提交很多文件，所以你可以多次add不同的文件
</code></pre></li>
</ol>
<h4 id="本地文件修改后提交"><a href="#本地文件修改后提交" class="headerlink" title="本地文件修改后提交"></a>本地文件修改后提交</h4><ol>
<li>修改文件后查看状态:git status</li>
<li><p>查看两个文件的改变：git diff</p>
<pre><code>要随时掌握工作区的状态，使用git status命令。
</code></pre><p> 如git status告诉你有文件被修改过，用git diff 可以查看修改内容。</p>
</li>
</ol>
<h4 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h4><p>1.查看提交的历史版本：git log</p>
<p>​    以一行的方式看（不看详情）：git log –pretty=oneline</p>
<p>​    HEAD表示当前版本</p>
<p>​    HEAD^表示上一个版本</p>
<p>​    HEAD^^上上个版本</p>
<p>​    HEAD~100往前一百个版本</p>
<p>2.回退到上一个版本：git reset –hard HEAD^</p>
<p>​    后悔了，回退到最新的一个版本：git reset –hard 版本号（要自己保存的）</p>
<p>3.如果自己不造：Git提供了一个命令用来记录你的每一次命令：git reflog</p>
<p>​    让HEAD指向哪个版本号，你就把当前版本定位在哪</p>
<h4 id="工作区和暂存区"><a href="#工作区和暂存区" class="headerlink" title="工作区和暂存区"></a>工作区和暂存区</h4><ol>
<li><p>当建立文件后，没添加到暂存区就是untracked</p>
</li>
<li><p>修改后的文件是Changes not staged for commit</p>
</li>
<li><p>添加到暂存区后没有交托给分支Changes to be committed</p>
</li>
</ol>
<h4 id="管理修改"><a href="#管理修改" class="headerlink" title="管理修改"></a>管理修改</h4><p>查看工作区和版本库里面最新版本的区别：git diff HEAD – filename</p>
<p>每次修改，如果不用<code>git add</code>到暂存区，那就不会加入到<code>commit</code>中。</p>
<h4 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h4><ol>
<li><p>丢弃工作区的修改：<code>git checkout -- readme.txt</code></p>
</li>
<li><p>命令<code>git checkout -- readme.txt</code>意思就是，把<code>readme.txt</code>文件在工作区的修改全部撤销，这里有两种情况：</p>
<p>​    一种是<code>readme.txt</code>自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</p>
<p>​    一种是<code>readme.txt</code>已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。</p>
<p>​    总之，就是让这个文件回到最近一次<code>git commit</code>或<code>git add</code>时的状态。</p>
</li>
<li><p>可以把暂存区的修改撤销掉（unstage），重新放回工作区：<code>git reset HEAD &lt;file&gt;</code></p>
</li>
<li><p>除了提交到远程版本库的内容都可以修改</p>
<p>​    场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令<code>git checkout -- file</code>。</p>
<p>​    场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令      <code>git reset HEAD &lt;file&gt;</code>，就回到了场景1，第二步按场景1操作。</p>
<p>​     场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考<a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000" target="_blank" rel="noopener">版本回退</a>一节，不过前提是没有推送到远程库。</p>
</li>
</ol>
<h4 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h4><ol>
<li>删除工作区的文件：rm filename</li>
<li>删除版本库中的该文件：git rm filename 并确认：git commit -m “reason”</li>
<li>从版本库里面恢复：git checkout –filename</li>
</ol>
<h3 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h3><ol>
<li>如果本地主目录没有.ssh目录，创建获得ssh公钥和密钥： ssh-keygen -t rsa -C “<a href="mailto:youremail@example.com" target="_blank" rel="noopener">youremail@example.com</a>“</li>
<li>在github里添加自己的ssh公钥</li>
</ol>
<h4 id="添加远程库"><a href="#添加远程库" class="headerlink" title="添加远程库"></a>添加远程库</h4><ol>
<li><p>Create a new repo</p>
</li>
<li><p>远程库关联：git remote add origin <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:karen2066/learngit.git</p>
</li>
<li><p>把本地库的所有内容推送到远程库上：git push -u origin master</p>
<p>​    实际上是把当前分支master推送到远程</p>
</li>
<li><p>把本地master分支的最新修改推送至GitHub： git push origin 分支名</p>
</li>
</ol>
<h4 id="从远程库克隆"><a href="#从远程库克隆" class="headerlink" title="从远程库克隆"></a>从远程库克隆</h4><ol>
<li>新建GitHub仓库</li>
<li>克隆一个本地库： git clone <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:karen2066/gitskills.git</li>
<li>git还听个http协议的地址，但这种方式需要输入口令</li>
</ol>
<h3 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h3><p>新建分支：git checkout -b dev</p>
<p>​    这条命令等于： git branch dev  + git checkout dev 两条命令</p>
<p>查看当前分支： git branch</p>
<p>​    当前分支前面会标一个*号</p>
<p>切换分支：git checkout master</p>
<p>合并分支的工作：git merge dev(dev是分支名称)</p>
<p>​    <code>git merge</code>命令用于合并指定分支到当前分支</p>
<p>删除分支：git branch -d dev</p>
<p>当分支提交冲突时：</p>
<p>​    master上修改，再提交，解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交（再往前提交一个版本相当于就是合并）</p>
<p>查看分支合并的情况：git log</p>
<p>查看分支合并图：git log –graph</p>
<h4 id="分支管理策略"><a href="#分支管理策略" class="headerlink" title="分支管理策略"></a>分支管理策略</h4><p>Git的分支管理模式：Fast forward，</p>
<p>如果要强制禁用<code>Fast forward</code>模式，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</p>
<p>禁止使用快速合并模式：git merge –no-ff -m “merge with no-ff” dev</p>
<p><code>master</code>分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活</p>
<p>加上<code>--no-ff</code>参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而<code>fast forward</code>合并就看不出来曾经做过合并</p>
<h4 id="bug分支"><a href="#bug分支" class="headerlink" title="bug分支"></a>bug分支</h4><p>把当前工作现场“储藏”起来，等以后恢复现场后继续工作：git stash</p>
<p>查看刚才保存的工作现场：git stash list</p>
<p>恢复现场，但不删除stash内容：git stash apply</p>
<p>恢复现场，同时删除stash内容：git stash pop</p>
<p>可以多次stash，恢复的时候，先用<code>git stash list</code>查看，然后恢复指定的stash:     git stash apply stash@{0}</p>
<h4 id="Feature分支"><a href="#Feature分支" class="headerlink" title="Feature分支"></a>Feature分支</h4><p>每添加一个新功能新建一个feature分支</p>
<p>丢弃一个没有被合并过的分支，强制删除分支： git branch -d feature-vulcan</p>
<h4 id="多人协作"><a href="#多人协作" class="headerlink" title="多人协作"></a>多人协作</h4><p>查看远程库的信息：git remote</p>
<p>查看远程库详情：git remote -v</p>
<h5 id="推送分支"><a href="#推送分支" class="headerlink" title="推送分支"></a>推送分支</h5><p>推送分支，就是把该分支上的所有本地提交推送到远程库： git push origin master、git push origin dev……</p>
<p>原则：</p>
<ul>
<li><p><code>master</code>分支是主分支，因此要时刻与远程同步；</p>
</li>
<li><p><code>dev</code>分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；</p>
</li>
<li><p>bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；</p>
</li>
<li><p>feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。</p>
<h5 id="抓取分支"><a href="#抓取分支" class="headerlink" title="抓取分支"></a>抓取分支</h5><p>创建远程<code>origin</code>的<code>dev</code>分支到本地：git checkout -b dev origin/dev</p>
<p>​    另一种：在本地创建和远程分支对应的分支，使用<code>git checkout -b branch-name origin/branch-name</code>，本地和远程分支的名称最好一致；</p>
<p>当提交到远程库有冲突时,先Git pull 把最新的origin/dev抓取下来， 本地合并解决冲突再推送</p>
<p>设置<code>dev</code>和<code>origin/dev</code>的链接：git branch –set-upstream-to=origin/<branch> dev</branch></p>
<p>再Git pull拉取</p>
</li>
</ul>
<p>多人协作的工作模式通常是这样：</p>
<ol>
<li>首先，可以试图用<code>git push origin &lt;branch-name&gt;</code>推送自己的修改；</li>
<li>如果推送失败，则因为远程分支比你的本地更新，需要先用<code>git pull</code>试图合并；</li>
<li>如果合并有冲突，则解决冲突，并在本地提交；</li>
<li>没有冲突或者解决掉冲突后，再用<code>git push origin &lt;branch-name&gt;</code>推送就能成功！</li>
</ol>
<p>如果<code>git pull</code>提示<code>no tracking information</code>，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>。</p>
<p>这就是多人协作的工作模式，一旦熟悉了，就非常简单。</p>
<h4 id="Rebase"><a href="#Rebase" class="headerlink" title="Rebase"></a>Rebase</h4><p>把分叉的提交变成直线</p>
<p>git rebase</p>
<ul>
<li><p>rebase操作可以把本地未push的分叉提交历史整理成直线；</p>
</li>
<li><p>rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比。</p>
<p>####标签管理</p>
<p>标签是版本库的一个快照，tag就是一个让人容易记住的有意义的名字，它跟某个commit绑在一起。</p>
<p>#####创建标签</p>
<p>切换到需要打标签的分支上：git branch/git checkout master</p>
<p>打标签：git tag <name></name></p>
<p>查看所有标签：git tag</p>
<p>对以前的版本打标签：git tag v0.9 f52c633（commit id）</p>
<p>查看commit id：git log –pretty=oneline –abbrev-commit</p>
<p>​    注意，标签不是按时间顺序列出，而是按字母排序的</p>
<p>查看标签信息：git show v0.9（tag名）</p>
<p>创建带有说明的标签，用<code>-a</code>指定标签名，<code>-m</code>指定说明文字：git tag -a v0.1 -m “version 0.1 released” 1094adb</p>
</li>
</ul>
<p>注意：标签总是和某个commit挂钩。如果这个commit既出现在master分支，又出现在dev分支，那么在这两个分支上都可以看到这个标签。</p>
<pre><code>##### 操作标签
</code></pre><p>删除：git tag -d v0.1</p>
<p>推送某个标签到远程：git push origin <tagname></tagname></p>
<p>一次性推送全部尚未推送到远程的本地标签：git push origin –tags</p>
<p>如果标签已经推送到远程，要删除远程标签：</p>
<p>​    先从本地删除：git tag -d v0.9</p>
<p>​    从远程删除：git push origin :refs/tags/v0.9</p>
<h4 id="忽略某些文件"><a href="#忽略某些文件" class="headerlink" title="忽略某些文件"></a>忽略某些文件</h4><p>创建.gitignore文件，把要忽略的文件名填进去</p>
<p>忽略文件的原则是：</p>
<ol>
<li>忽略操作系统自动生成的文件，比如缩略图等；</li>
<li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的<code>.class</code>文件；</li>
<li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。</li>
</ol>
<p>你想添加一个文件到Git，但发现添加不了，原因是这个文件被<code>.gitignore</code>忽略了：如果你确实想添加该文件，可以用<code>-f</code>强制添加到Git：git add -f App.class</p>
<p>哪个规则写错了可以用<code>git check-ignore</code>命令检查：git check-ignore -v App.class</p>
<p>​    Git会告诉我们，<code>.gitignore</code>的第3行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。</p>
<p>####配置别名</p>
<p>给status配置别名： git config –global alias.st status</p>
<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>每个仓库的Git配置文件都放在<code>.git/config</code>文件中：cat .git/config </p>
<p>​    别名就在<code>[alias]</code>后面，要删除别名，直接把对应的行删掉即可</p>
<p> 当前用户的Git配置文件放在用户主目录下的一个隐藏文件<code>.gitconfig</code>中：cat .gitconfig</p>
<p>开源Git:</p>
<p>点“Fork”就在自己的账号下克隆了一个bootstrap仓库，然后，从自己的账号下clone：(一定要从自己的账号下clone仓库，这样你才能推送修改。如果从bootstrap的作者的仓库地址<a href="mailto:`git@github.com" target="_blank" rel="noopener">`git@github.com</a>:twbs/bootstrap.git`克隆，因为没有权限，你将不能推送修改。)</p>
<p>可以在GitHub上发起一个pull request</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/购物app_首页/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/购物app_首页/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T09:16:20+08:00">
                2018-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="购物app-首页"><a href="#购物app-首页" class="headerlink" title="购物app_首页"></a>购物app_首页</h3><hr>
<h5 id="settings配置"><a href="#settings配置" class="headerlink" title="settings配置"></a>settings配置</h5><p>确保以下配置得到处理：settings.py文件中的installed_app的配置，databases的配置，templates的配置，static的配置, login_url = ‘/login/‘，工程的<strong>init</strong>.py中初始化pymysql，install_as_mysqldb。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    &apos;django.contrib.auth&apos;,</span><br><span class="line">    &apos;django.contrib.contenttypes&apos;,</span><br><span class="line">    &apos;django.contrib.sessions&apos;,</span><br><span class="line">    &apos;django.contrib.messages&apos;,</span><br><span class="line">    &apos;django.contrib.staticfiles&apos;,</span><br><span class="line">    &apos;app&apos;,</span><br><span class="line">    &apos;user&apos;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="url配置"><a href="#url配置" class="headerlink" title="url配置"></a>url配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls import url, include</span><br><span class="line">from django.contrib import admin</span><br><span class="line"></span><br><span class="line">from django.contrib.staticfiles.urls import static</span><br><span class="line"></span><br><span class="line">from axf import settings</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&apos;^admin/&apos;, admin.site.urls),</span><br><span class="line">    # url映射到项目的url，采用url反向解析</span><br><span class="line">    url(r&apos;^axf/&apos;, include(&apos;app.urls&apos;, namespace=&apos;axf&apos;)),</span><br><span class="line">    url(r&apos;^user/&apos;, include(&apos;user.urls&apos;, namespace=&apos;user&apos;)),</span><br><span class="line">]</span><br><span class="line"># 加载静态文件</span><br><span class="line">urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
<p>##### </p>
<h6 id="项目url"><a href="#项目url" class="headerlink" title="项目url"></a>项目url</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls import url, include</span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.contrib.staticfiles.urls import static</span><br><span class="line">from axf import settings</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&apos;^admin/&apos;, admin.site.urls),</span><br><span class="line">    # 与应用的url建立映射关系</span><br><span class="line">    url(r&apos;^axf/&apos;, include(&apos;app.urls&apos;, namespace=&apos;axf&apos;)),</span><br><span class="line">    # 与user的应用建立映射关系</span><br><span class="line">    url(r&apos;^user/&apos;, include(&apos;user.urls&apos;, namespace=&apos;user&apos;)),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
<h6 id="应用url"><a href="#应用url" class="headerlink" title="应用url"></a>应用url</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls import url</span><br><span class="line"></span><br><span class="line">from app import views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    # 首页</span><br><span class="line">    url(r&apos;^home/&apos;, views.home, name=&apos;home&apos;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="控制器（views）"><a href="#控制器（views）" class="headerlink" title="控制器（views）"></a>控制器（views）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&apos;&apos;&apos;</span><br><span class="line">a）banner轮播模型定义</span><br><span class="line"></span><br><span class="line">b）导航栏模型定义</span><br><span class="line"></span><br><span class="line">c）必购模型定义</span><br><span class="line"></span><br><span class="line">d）商店模型定义</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">from django.http import HttpResponseRedirect</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from django.core.urlresolvers import reverse</span><br><span class="line"></span><br><span class="line">from app.models import MainWheel, MainNav, MainMustBuy, \</span><br><span class="line">    MainShop, MainShow, FoodType, Goods</span><br><span class="line"></span><br><span class="line">def home(request):</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">    首页视图函数</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">    # GET请求</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">		# 拿到以下数据</span><br><span class="line">       mainwheels = MainWheel.objects.all()</span><br><span class="line">        mainnavs = MainNav.objects.all()</span><br><span class="line">        mainbuys = MainMustBuy.objects.all()</span><br><span class="line">        mainshops = MainShop.objects.all()</span><br><span class="line">        mainshows = MainShow.objects.all()</span><br><span class="line">		# 将后端数据传到前端给html页面渲染</span><br><span class="line">        data = &#123;</span><br><span class="line">            &apos;title&apos;: &apos;首页&apos;,</span><br><span class="line">            &apos;mainwheels&apos;: mainwheels,</span><br><span class="line">            &apos;mainnavs&apos;: mainnavs,</span><br><span class="line">            &apos;mainbuys&apos;: mainbuys,</span><br><span class="line">            &apos;mainshops&apos;: mainshops,</span><br><span class="line">            &apos;mainshows&apos;: mainshows,</span><br><span class="line">        &#125;</span><br><span class="line">    	return render(request, &apos;home/home.html&apos;, data)</span><br></pre></td></tr></table></figure>
<h5 id="home-html渲染"><a href="#home-html渲染" class="headerlink" title="home.html渲染"></a>home.html渲染</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends 'base_main.html' %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 页面继承base_main这个页面--&gt;</span></span><br><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="comment">&lt;!-- 加载静态资源--&gt;</span></span><br><span class="line">&#123;% block extCSS %&#125;</span><br><span class="line">    &#123;&#123; block.super &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"&#123;% static 'app/home/home.css' %&#125;"</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block EXTJS %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"&#123;% static 'app/home/js/home.js' %&#125;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"><span class="comment">&lt;!-- heml页面body里的部分 --&gt;</span></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">    &#123;#   顶部轮播     #&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span> <span class="attr">id</span>=<span class="string">"topSwiper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-wrapper"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--处理轮播banner图--&gt;</span></span><br><span class="line">            &#123;% for wheel in mainwheels %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; wheel.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="comment">&lt;!-- 处理结束 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 如果需要分页器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"swiper-pagination"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;#         导航         #&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"topMenu"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 处理导航数据 --&gt;</span></span><br><span class="line">                &#123;% for nav in mainnavs %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; nav.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; nav.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                <span class="comment">&lt;!--处理结束--&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;#         必购     #&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"swiperMenu"</span> <span class="attr">class</span>=<span class="string">"swiper-container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"swiper-wrapper"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 处理必购商品信息 --&gt;</span></span><br><span class="line">            &#123;% for buys in mainbuys %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"swiper-slide"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; buys.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="comment">&lt;!-- 处理结束 --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;#          商店    #&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"CVS"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--处理第一个店铺的数据的图片--&gt;</span></span><br><span class="line">        &#123;% for shops in mainshops %&#125;</span><br><span class="line">            &#123;% ifequal forloop.counter 1 %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shops.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            &#123;% endifequal %&#125;</span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">        <span class="comment">&lt;!--处理结束--&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">            &#123;% for shops in mainshops %&#125;</span><br><span class="line">                &#123;% if forloop.counter &gt; 1 and forloop.counter <span class="tag">&lt; <span class="attr">4</span> %&#125;</span></span><br><span class="line">            &lt;!--处理第二个到第四个数据--&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shops.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            <span class="comment">&lt;!--处理结束--&gt;</span></span><br><span class="line">             &#123;% endfor %&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--处理第五个到第八个数据--&gt;</span></span><br><span class="line">            &#123;% for shops in mainshops %&#125;</span><br><span class="line">                &#123;% if forloop.counter &gt; 3 and forloop.counter <span class="tag">&lt; <span class="attr">8</span> %&#125;</span></span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shops.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; shops.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="comment">&lt;!--处理结束--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--处理第八个到第十二个数据--&gt;</span></span><br><span class="line">            &#123;% for shops in mainshops %&#125;</span><br><span class="line">                &#123;% if forloop.counter &gt; 7 and forloop.counter <span class="tag">&lt; <span class="attr">12</span> %&#125;</span></span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shops.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                &#123;% endif %&#125;</span><br><span class="line">            &#123;% endfor %&#125;</span><br><span class="line">            <span class="comment">&lt;!--处理结束--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;#         主要显示 #&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainInfo"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--商品展示--&gt;</span></span><br><span class="line">        &#123;% for shows in mainshows %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>更多&amp;gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shows.img &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shows.img1 &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"description"</span>&gt;</span></span><br><span class="line">                                &#123;&#123; shows.longname1 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>￥&#123;&#123; shows.price1 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">s</span>&gt;</span>￥&#123;&#123; shows.marketprice1 &#125;&#125;<span class="tag">&lt;/<span class="name">s</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>+<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shows.img2 &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"description"</span>&gt;</span></span><br><span class="line">                                &#123;&#123; shows.longname2 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>￥&#123;&#123; shows.price2 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">s</span>&gt;</span>￥&#123;&#123; shows.marketprice2 &#125;&#125;<span class="tag">&lt;/<span class="name">s</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>+<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; shows.img3 &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"description"</span>&gt;</span></span><br><span class="line">                                &#123;&#123; shows.longname3 &#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>￥&#123;&#123; shows.price3 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">s</span>&gt;</span>￥&#123;&#123; shows.marketprice3 &#125;&#125;<span class="tag">&lt;/<span class="name">s</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>+<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">        <span class="comment">&lt;!--商品展示结束--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<h6 id="js文件"><a href="#js文件" class="headerlink" title="js文件"></a>js文件</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">initTopSwiper();</span><br><span class="line"></span><br><span class="line">initMenuSwiper();</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initTopSwiper</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> swiper = <span class="keyword">new</span> Swiper(<span class="string">"#topSwiper"</span>, &#123;</span><br><span class="line">    loop: <span class="literal">true</span>,</span><br><span class="line">    pagination:<span class="string">".swiper-pagination"</span>,</span><br><span class="line">    autoloop: <span class="number">4000</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMenuSwiper</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> swiper = <span class="keyword">new</span> Swiper(<span class="string">"#swiperMenu"</span>, &#123;</span><br><span class="line">    slidesPerView: <span class="number">3</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/正则表达式总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/正则表达式总结/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T09:16:20+08:00">
                2018-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title: 正则表达式总结</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>语法</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>\b</td>
<td>是正则表达式规定的一个特殊代码（好吧，某些人叫它元字符，metacharacter），代表着单词的开头或结尾，也就是单词的分界处。虽然通常英文的单词是由空格，标点符号或者换行来分隔的，但是\b并不匹配这些单词分隔字符中的任何一个，它只匹配一个位置。</td>
</tr>
<tr>
<td>*</td>
<td>同样是元字符，不过它代表的不是字符，也不是位置，而是数量——它指定*前边的内容可以连续重复使用任意次以使整个表达式得到匹配</td>
</tr>
<tr>
<td>.*</td>
<td>连在一起就意味着任意数量的不包含换行的字符</td>
</tr>
<tr>
<td>\d</td>
<td>一位数字(0，或1，或2，或……)</td>
</tr>
<tr>
<td>0\d{2}-\d{8}</td>
<td>\d必须连续重复匹配2次(8次)</td>
</tr>
<tr>
<td>\s</td>
<td>任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等</td>
</tr>
<tr>
<td>\w</td>
<td>字母或数字或下划线或汉字等</td>
</tr>
<tr>
<td>\d+</td>
<td>1个或更多连续的数字</td>
</tr>
<tr>
<td>*</td>
<td>匹配重复任意次(可能是0次)</td>
</tr>
<tr>
<td>+</td>
<td>则匹配重复1次或更多次</td>
</tr>
<tr>
<td>.</td>
<td>匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结束</td>
</tr>
<tr>
<td>{5,12}</td>
<td>则是重复的次数不能少于5次，不能多于12次</td>
</tr>
<tr>
<td>^和$</td>
<td>的意义就变成了匹配行的开始处和结束处</td>
</tr>
<tr>
<td>\</td>
<td>如果你想查找元字符本身的话,来取消这些字符的特殊意义</td>
</tr>
<tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
<tr>
<td>[aeiou]</td>
<td>任何一个英文元音字母</td>
</tr>
<tr>
<td>[.?!]</td>
<td>标点符号(.或?或!)</td>
</tr>
<tr>
<td>[0-9]</td>
<td>同\d</td>
</tr>
<tr>
<td>[a-z0-9A-Z_]</td>
<td>同\w</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>练习：</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>(?0\d{2}[) -]?\d{8}</td>
<td>匹配电话</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>(?</td>
<td>0</td>
<td>\d{2}</td>
<td>[) -]?</td>
<td>\d{8}</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>(能出现一次或零次</td>
<td>0</td>
<td>两个数字</td>
<td>)空格- 三选一</td>
<td>8个数字</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>\</td>
<td></td>
<td>如果满足其中任意一种规则都应该当成匹配，具体方法是用\</td>
<td>把不同的规则分隔开</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>小括号</td>
<td>来指定子表达式(也叫做分组)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>例子2：</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>((2[0-4]\d\</td>
<td>25[0-5]\</td>
<td>[01]?\d\d?).){3}(2[0-4]\d\</td>
<td>25[0-5]\</td>
<td>[01]?\d\d?)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>匹配ip地址</td>
</tr>
<tr>
<td>((2[0-4]\d\</td>
<td>25[0-5]\</td>
<td>[01]?\d\d?).){3}</td>
<td>分块分析</td>
<td></td>
<td></td>
<td>(2[0-4]\d\</td>
<td>25[0-5]\</td>
<td>[01]?\d\d?)</td>
<td>第二块</td>
<td></td>
<td></td>
</tr>
<tr>
<td>(2[0-4]\d\</td>
<td>25[0-5]\</td>
<td>[01]?\d\d?)</td>
<td>第一块</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2[0-4]\d</td>
<td>2,0-4中的任意一个，任意一个数字</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>25[0-5]</td>
<td>25，0-5中的任意一个</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>[01]?\d\d?</td>
<td>01中的任意一个重复零次或一次，任意数字，任意数字重复零次或一次</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>{3}</td>
<td>以上或者选项重复3次</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2[0-4]\d\</td>
<td>25[0-5]\</td>
<td>[01]?\d\d?</td>
<td>第二块</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2[0-4]\d</td>
<td>25[0-5]</td>
<td>[01]?\d\d?</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2，0-4中的一个，一个任意数字</td>
<td>25,0-5中的任意一个</td>
<td>01中的任意一个重复零次或一次，数字，数字零次或一次</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3位</td>
<td>3位</td>
<td>1位或者2位或者3位</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>IP地址中每个数字都不能大于255</td>
<td></td>
<td>eg:</td>
<td>127.0.0.10</td>
<td>245.245.<br>245.245</td>
<td>254.245.04.092</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>深入：</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>反义：</td>
<td>对比（右侧）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>\W</td>
<td>匹配任意不是字母，数字，下划线，汉字的字符</td>
<td>\w</td>
<td>匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符的字符</td>
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词开头或结束的位置</td>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>[^x]</td>
<td>匹配除了x以外的任意字符</td>
<td></td>
<td></td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
<td>[aeiou]</td>
<td>任何一个英文元音字母</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;a[^&gt;]+&gt;</td>
<td>匹配用尖括号括起来的以a开头的字符串</td>
<td></td>
<td></td>
</tr>
<tr>
<td>后向引用</td>
<td>用于重复搜索前面某个分组匹配的文本</td>
<td></td>
<td></td>
</tr>
<tr>
<td>匹配这个子表达式的文本(也就是此分组捕获的内容)可以在表达式或其它程序中作进一步的处理</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>默认情况下，每个分组会自动拥有一个组号，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>例子：</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>\b(\w+)\b\s+\1\b</td>
<td></td>
<td></td>
<td>用来匹配重复的单词</td>
</tr>
<tr>
<td>\b</td>
<td>(\w+)</td>
<td>\b</td>
<td>\s+</td>
</tr>
<tr>
<td>占位符</td>
<td>一个字母数字下划线或汉字</td>
<td>占位符</td>
<td>一个或多个空白符</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>指定分组的组名</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>(?<word>\w+)</word></td>
<td></td>
<td>名字就是word</td>
<td></td>
</tr>
<tr>
<td>等同于(?’Word’\w+)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>反向引用：</td>
<td>\k\<word></word></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>分类</td>
<td>代码/语法</td>
<td>说明</td>
<td></td>
</tr>
<tr>
<td>捕获</td>
<td>(exp)</td>
<td>匹配exp,并捕获文本到自动命名的组里</td>
<td></td>
</tr>
<tr>
<td></td>
<td>(?\<name>exp)</name></td>
<td>匹配exp,并捕获文本到名称为name的组里，也可以写成(?’name’exp)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>(?:exp)</td>
<td>匹配exp,不捕获匹配的文本，也不给此分组分配组号</td>
<td></td>
</tr>
<tr>
<td>零宽断言</td>
<td>(?=exp)</td>
<td>匹配exp前面的位置</td>
<td></td>
</tr>
<tr>
<td></td>
<td>(?&lt;=exp)</td>
<td>匹配exp后面的位置</td>
<td></td>
</tr>
<tr>
<td></td>
<td>(?!exp)</td>
<td>匹配后面跟的不是exp的位置</td>
<td></td>
</tr>
<tr>
<td></td>
<td>(?&lt;!exp)</td>
<td>匹配前面不是exp的位置</td>
<td></td>
</tr>
<tr>
<td>注释</td>
<td>(?#comment)</td>
<td>这种类型的分组不对正则表达式的处理产生任何影响，用于提供注释让人阅读</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>零宽断言</td>
<td>查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们像\b,^,$那样用于指定一个位置，这个位置应该满足一定的条件(即断言)</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>零宽度正预测先行断言(?=exp)</td>
<td>断言自身出现的位置的后面能匹配表达式exp</td>
<td></td>
<td></td>
</tr>
<tr>
<td>\b\w+(?=ing\b)</td>
<td>匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找I’m singing while you’re dancing.时，它会匹配sing和danc</td>
<td></td>
<td></td>
</tr>
<tr>
<td>零宽度正回顾后发断言(?&lt;=exp)</td>
<td>断言自身出现的位置的前面能匹配表达式exp</td>
<td></td>
<td></td>
</tr>
<tr>
<td>(?&lt;=\bre)\w+\b</td>
<td>会匹配以re开头的单词的后半部分(除了re以外的部分)，例如在查找reading a book时，它匹配ading</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>负向零宽断言</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>贪婪匹配</td>
<td>通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符</td>
<td></td>
<td></td>
</tr>
<tr>
<td>懒惰匹配</td>
<td>匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复</td>
<td></td>
<td></td>
</tr>
<tr>
<td>因为正则表达式有另一条规则，比懒惰／贪婪规则的优先级更高：最先开始的匹配拥有最高的优先权</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>*?</td>
<td>重复任意次，但尽可能少重复</td>
<td></td>
<td></td>
</tr>
<tr>
<td>+?</td>
<td>重复1次或更多次，但尽可能少重复</td>
<td></td>
<td></td>
</tr>
<tr>
<td>??</td>
<td>重复0次或1次，但尽可能少重复</td>
<td></td>
<td></td>
</tr>
<tr>
<td>{n,m}?</td>
<td>重复n到m次，但尽可能少重复</td>
<td></td>
<td></td>
</tr>
<tr>
<td>{n,}?</td>
<td>重复n次以上，但尽可能少重复</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>IgnoreCase(忽略大小写)</td>
<td>匹配时不区分大小写。</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Multiline(多行模式)</td>
<td>更改^和$的含义，使它们分别在任意一行的行首和行尾匹配，而不仅仅在整个字符串的开头和结尾匹配。(在此模式下,$的精确含意是:匹配\n之前的位置以及字符串结束前的位置.)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Singleline(单行模式)</td>
<td>更改.的含义，使它与每一个字符匹配（包括换行符\n）。</td>
<td></td>
<td></td>
</tr>
<tr>
<td>IgnorePatternWhitespace(忽略空白)</td>
<td>忽略表达式中的非转义空白并启用由#标记的注释。</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ExplicitCapture(显式捕获)</td>
<td>仅捕获已被显式命名的组。</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>平衡组/递归匹配</td>
<td>平衡组语法是由.Net Framework支持的；其它语言／库不一定支持这种功能，或者支持此功能但需要使用不同的语法。</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/NoSQL入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/NoSQL入门/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T09:16:20+08:00">
                2018-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="NoSQL入门"><a href="#NoSQL入门" class="headerlink" title="NoSQL入门"></a>NoSQL入门</h2><h3 id="NoSQL概述"><a href="#NoSQL概述" class="headerlink" title="NoSQL概述"></a>NoSQL概述</h3><p>1998年提出，原意是No SQL! 2008年受到重视，因为在2008正式进入Big Data时代。Not Only SQL!互补的关系。</p>
<p>高可用，分区容忍性。</p>
<p>####分类：</p>
<ul>
<li>K-V： 键值对数据库，比如：Redis。以键值对形式保存（存取性能特别好）</li>
<li>Document:文档数据库，比如：MongoDB。查找方便，可扩展性强，传统关系型数据库扩容很困难。</li>
<li>Graph： 图数据库，网状结构。比如：Neo4j。适合社交性软件，一度二度人脉，类似脉脉。</li>
<li>列簇：列簇数据库，把相关数据放到列里面。比如：HBase.适合分布式存储，数据的规约处理</li>
</ul>
<h4 id="CAP定理（CAP-theorem）http-www-runoob-com-mongodb-nosql-html"><a href="#CAP定理（CAP-theorem）http-www-runoob-com-mongodb-nosql-html" class="headerlink" title="CAP定理（CAP theorem）http://www.runoob.com/mongodb/nosql.html"></a>CAP定理（CAP theorem）<a href="http://www.runoob.com/mongodb/nosql.html" target="_blank" rel="noopener">http://www.runoob.com/mongodb/nosql.html</a></h4><p>在计算机科学中, CAP定理（CAP theorem）, 又被称作 布鲁尔定理（Brewer’s theorem）, 它指出对于一个分布式计算系统来说，不可能同时满足以下三点:</p>
<ul>
<li><strong>一致性(Consistency)</strong> (所有节点在同一时间具有相同的数据)</li>
<li><strong>可用性(Availability)</strong> (保证每个请求不管成功或者失败都有响应)</li>
<li><strong>分隔容忍(Partition tolerance)</strong> (系统中任意信息的丢失或失败不会影响系统的继续运作)</li>
</ul>
<p>CAP理论的核心是：一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求，最多只能同时较好的满足两个。</p>
<p>因此，根据 CAP 原理将 NoSQL 数据库分成了满足 CA 原则、满足 CP 原则和满足 AP 原则三 大类：</p>
<ul>
<li><p>CA - 单点集群，满足一致性，可用性的系统，通常在可扩展性上不太强大。</p>
</li>
<li><p>CP - 满足一致性，分区容忍性的系统，通常性能不是特别高。</p>
</li>
<li><p>AP - 满足可用性，分区容忍性的系统，通常可能对一致性要求低一些。</p>
<p>​</p>
<p>传统应用和金融类应用考虑的是CA，互联网和移动互联网时代的应用更注重AP</p>
</li>
</ul>
<h3 id="主流NoSQL数据库"><a href="#主流NoSQL数据库" class="headerlink" title="主流NoSQL数据库"></a>主流NoSQL数据库</h3><h3 id="Redis概述"><a href="#Redis概述" class="headerlink" title="Redis概述"></a>Redis概述</h3><p>特点：高速缓存，在内存中运行，持久化才保存到硬盘中</p>
<p>内存的读写速率大概是：G赫兹，一秒2-4G DDR：双倍速通道</p>
<p>​    机械硬盘：一秒 50兆左右</p>
<p>​    固态硬盘：几百兆</p>
<p>###Redis入门</p>
<p>查看Linux系统中是否有redis服务器和客户端工具：redis-server –version/redis-cli –version</p>
<p>#####修改redis配置文件：</p>
<ul>
<li><p>​    bind 172.16.252.192：绑定内网地址</p>
</li>
<li><p>​    port 6379：端口默认是6379(信息隐藏技术)走的是TCP，端口是0-65535</p>
</li>
<li><p>​    tcp-backlog 511：队列大小</p>
</li>
<li><p>​     daemonize no：改成yes的话开机自启，随系统启动。守护进程（不改）</p>
</li>
<li><p>​    logfile “”：日志文件的位置</p>
</li>
<li><p>​    databases 16：默认开启16个数据库</p>
</li>
<li><p>​    save 900 1</p>
<pre><code>203 save 300 10
204 save 60 10000：持久化的机制：
</code></pre></li>
</ul>
<p>​        （含义是：In the example below the behaviour will be to save:<br>             190 #   after 900 sec (15 min) if at least 1 key changed<br>             191 #   after 300 sec (5 min) if at least 10 keys changed<br>             192 #   after 60 sec if at least 10000 keys changed<br>             193 #<br>             194 #   Note: you can disable saving completely by commenting      out all “save” lines. It is also           </p>
<p>​            possible to remove all the previously conf     igured save</p>
<pre><code>197 #   points by adding a save directive with a single empty      string argument）
</code></pre><ul>
<li><p>​    requirepass 1qaz2wsx：设置密码，可以通过redis控制你的Linux系统</p>
</li>
<li><p>​    maxclients 10000：最大允许10000客户端连接</p>
</li>
<li><p>​    appendonly yes：AOF持久化机制</p>
</li>
</ul>
<p>#####参考命令：</p>
<p>绑的是内网，连的是公网</p>
<ul>
<li>开启redis：redis-server redis_628.conf</li>
<li>拿到后台运行：bg %1</li>
<li>查看后台应用：jobs</li>
<li>查看进程：ps -ef | grep redis</li>
<li>查看端口是否被占用：netstat -nap | grep redis</li>
<li>连接客户端：redis-cli -h 172.16.252.192<br>   ​        auth 1qaz2wsx：认证</li>
<li>redis设置过期时间：set username karen ex 30</li>
</ul>
<ul>
<li><p>ttl username：time to live查看存活时间</p>
<pre><code>-1：永不超时
</code></pre><p>  -2：查无此键</p>
</li>
<li><p>expire username 120：设置超时时间</p>
</li>
<li>手动保存：save</li>
<li>后台保存：bgsave</li>
<li>模糊查找：keys *2</li>
</ul>
<ul>
<li><p>恢复你的数据的方法：</p>
<p> rdb：保存的数据</p>
<p> aof:记得你的指令（优选），用你敲过的命令来恢复数据</p>
</li>
<li><p>判断有没有这个键：exists foo</p>
<p> 1有，0没有</p>
</li>
<li><p>退出</p>
<p>​    quit</p>
<p>​    shutdown  /save/nosave：关机，默认保存</p>
</li>
<li><p>redis值的类型：字符串，哈希表，列表，集合，有序集合</p>
</li>
<li><p>redis也有事务，发布订阅</p>
</li>
<li><p>redis-benchmark -h 172.16.252.192 :redis 基准测试（相当于跑分软件)</p>
</li>
<li>Z：暂停，C：停止</li>
</ul>
<p>实现对数据的高速访问，经常要用的数据放到内存中，使用redis数据库，因为关系型数据库有锁所以越到后面更新越慢</p>
<h4 id="Redis的数据类型"><a href="#Redis的数据类型" class="headerlink" title="Redis的数据类型"></a>Redis的数据类型</h4><h5 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h5><p>单个键对应的数据不能超过512兆</p>
<ul>
<li>append:增加</li>
<li>strlen:看长度</li>
<li>setrange:字符串的替换，把指定的范围改为你想要的内容</li>
</ul>
<p>​    120.79.137.184:6379&gt; get name<br>        “wangwang”<br>        120.79.137.184:6379&gt; strlen name<br>        (integer) 8<br>        120.79.137.184:6379&gt; setrange name 5 hellokitty<br>        (integer) 15<br>        120.79.137.184:6379&gt; get name<br>        “wangwhellokitty”</p>
<ul>
<li>incr :增加1</li>
<li>incrby number 50：增加50</li>
<li>decr:减少1</li>
<li>decrby:减少 量</li>
<li>getset:拿到之前的并重置建对应的值</li>
</ul>
<h5 id="哈希表"><a href="#哈希表" class="headerlink" title="哈希表"></a>哈希表</h5><p>最好的用来保存对象，以键值对的形式，在字典中又放了字典</p>
<ul>
<li>hset:见名知意</li>
<li>hget:同上</li>
<li>hgetall:同上</li>
<li>hdel:同上</li>
<li>hexists:判断字段是否存在</li>
<li>hkeys:看所有的</li>
<li>hlen:长度</li>
<li>hincrby:加字段的值</li>
<li>hincrbyfloat:加字段浮点数</li>
<li>hvals:拿一个键对应的所有值</li>
</ul>
<h5 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h5><p>模拟栈和队列</p>
<p>队列：左边取，右边放，</p>
<p>栈：先进后出，后进先出，</p>
<p>受限队列：用ltrim </p>
<ul>
<li>lpush：放东西，从左往右放</li>
<li>lpop:取东西，从左往右取，元素已经取走了</li>
<li>rpush：从右边放</li>
<li>rpop:从右边取</li>
<li>lrange:从左边往右边取，元素没有取走</li>
</ul>
<p>​    lrange mylist 2 5:从左往右取2-5</p>
<ul>
<li>lrange mylist3 0 -1：全部取完</li>
<li>ltrim:保留，限定只取某一个范围，截取的部分被保留，其他元素已经取走了</li>
</ul>
<h5 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h5><p>元素是没有下标的，自动去重，可以做交并叉运算</p>
<p>元素是离散的，没有序</p>
<ul>
<li>sadd set1 apple orange orange：放元素</li>
<li>scard set1：查看键的大小，多少值</li>
<li>smembers set1：取出键，无序的</li>
<li>sinter set1 set2：查看交集</li>
<li>sunion set1 set2:查看并集</li>
<li>sdiff set1 set2:求差集</li>
</ul>
<p>​    set1里面有，set2里面没有的</p>
<p>​    sdiff set2 set1: 2有1没有</p>
<ul>
<li>spop set1：取元素,默认取一个，顺序不一，根据内部生成的码来取,取走了</li>
<li>srandmember set2 2 :随机取两个，没取走</li>
<li>sismember set2 grape：判断元素是否在集合中</li>
</ul>
<h5 id="有序集合（Zset）"><a href="#有序集合（Zset）" class="headerlink" title="有序集合（Zset）"></a>有序集合（Zset）</h5><p>跟集合比较可以排序，在放元素进入时，绑定score大小决定他的顺序</p>
<p>用在动态排位，动态榜单应用</p>
<ul>
<li>zadd players 100 zhao 85 qian 200 sun 120 lee 180 zhou：放元素</li>
<li>zrange players 0 -1：正向排序取出所有</li>
<li>zrevrange players 0 -1：反向排序取出所有</li>
<li>zrevrange players 0 -1 withscores：分数也会显示</li>
<li>zcard players：有多少元素</li>
<li>zcount players 150 200：计数，在150到200中的元素有多少个</li>
</ul>
<p>#####GEO地理位置类型</p>
<p>Redis3加入的新类型</p>
<p>LBS应用：location-based service:基于位置的服务</p>
<p>根据位置算距离有多远，范围内的搜索</p>
<ul>
<li>geoadd：加元素，要加经纬度坐标</li>
<li>geopos:坐标</li>
<li>georadius:在半径内</li>
<li>geodist:算距离</li>
</ul>
<p>#####事务</p>
<ul>
<li>multi:开启</li>
<li>exec:提交</li>
<li>discard:回滚</li>
</ul>
<p>#####线程安全问题：</p>
<p>redis是线程安全的还是不安全的？redis是单线程+多路I/O复用的工作模式，异步io模式，多个读写操作并发的进行，单线程保持安全，支持多线程操作。所以redis和关系型数据库一样都是安全的。</p>
<h5 id="第二类丢失更新，没有保护数据，多线程访问，后面覆盖前面的"><a href="#第二类丢失更新，没有保护数据，多线程访问，后面覆盖前面的" class="headerlink" title="第二类丢失更新，没有保护数据，多线程访问，后面覆盖前面的"></a>第二类丢失更新，没有保护数据，多线程访问，后面覆盖前面的</h5><p>线程之间共享数据很容易，但多个进程之间是相互隔离的，多进程中有一个模块，quaue实现多个进程互相通信</p>
<p>多进程可以利用cpu的多核特性</p>
<p>python有？？解释器，64.只能用一个核</p>
<p>多线程最重要的两个好处：</p>
<p>​    第一：改善性能，占用更多的cpu资源，占用cpu更多的时间</p>
<p>​    第二：改善用户体验，耗时的任务就可以扔到单独的线程或进程中去做</p>
<p>进程和线程是可以设置优先级</p>
<p>python中优化性能的方法：协程，微线程，单线程加异步io</p>
<p>#####选择数据类型：</p>
<p>一般的用字符串（图片，文件……），存对象用哈希表，队列或者栈用列表，去重用set，动态排位用Zset。</p>
<p>####端口映射</p>
<p>公网访问内网：在路由器上做端口映射-请求走到路由器，路由器通过端口决定将对该端口的请求映射到内网哪一台主机上</p>
<p>内网访问公网：NAT地址转换 - 内网地址映射为公网地址（看到的是你的路由器地址）</p>
<p>路由器会话：网络地址转换</p>
<h3 id="python连接redis"><a href="#python连接redis" class="headerlink" title="python连接redis"></a>python连接redis</h3><p>使用的是redis-py一个开源项目，位于GitHub</p>
<p>####多台redis服务器，读写分离，主从操作</p>
<p>主从复制，主机写，从机复制</p>
<p>info replication：查看自己的角色</p>
<p>配置文件redis.conf</p>
<p>做为奴隶：</p>
<p>​    slaveof 120.77.222.217 6379：做120.77.222.217的奴隶端口是6379</p>
<p>​    masterauth 1qaz2wsx：master的密码</p>
<p>​     slaveof no one：回到master角色</p>
<h5 id="如果master宕机就启动自动监控程序，哨兵（故障的自动切换）"><a href="#如果master宕机就启动自动监控程序，哨兵（故障的自动切换）" class="headerlink" title="如果master宕机就启动自动监控程序，哨兵（故障的自动切换）"></a>如果master宕机就启动自动监控程序，哨兵（故障的自动切换）</h5><p>配置文件：sentinel.conf</p>
<p>​    sentinel monitor mymaster 127.0.0.1 6379 2：监控master，端口，投票数量</p>
<p>​    sentinel auth-pass <master-name> <password>：哨兵也需要密码</password></master-name></p>
<p>​    sentinel down-after-milliseconds mymaster 30000：缓冲时间为30秒</p>
<p>​     sentinel failover-timeout mymaster 180000：180秒内恢复以前的master回来只能作为奴隶，180秒后就从本主从中剔除（通过修改配置文件）</p>
<p>最好把所有的从机和主机的密码保持一致，避免更新密码</p>
<p>打开防火墙端口</p>
<h5 id="Redis集群"><a href="#Redis集群" class="headerlink" title="Redis集群"></a>Redis集群</h5><h6 id="关于集群：多个节点当成一个节点来使用"><a href="#关于集群：多个节点当成一个节点来使用" class="headerlink" title="关于集群：多个节点当成一个节点来使用"></a>关于集群：多个节点当成一个节点来使用</h6><p>避免单点故障：将单个节点做成多个节点</p>
<p>负载均衡服务器：配置在节点的前面，eg.轮询算法（RR），哈希码算法（Hash）（比如对5求余数），看负载看连接数(MCC) +Keepalived 双活服务（相当于热备份：如果负载均衡服务器挂了）</p>
<p>负载均衡可以用硬件也可以用软件做，Nginx/LVS不论用哪个都要用双活备份</p>
<p>######redis的集群</p>
<p>先要安装Ruby的编程语言环境</p>
<p>因为redis有一段脚本：redis-trib.rb</p>
<h3 id="MongoDB概述"><a href="#MongoDB概述" class="headerlink" title="MongoDB概述"></a>MongoDB概述</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/购物app_个人中心 模板/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/购物app_个人中心 模板/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T09:16:20+08:00">
                2018-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="购物app-个人中心"><a href="#购物app-个人中心" class="headerlink" title="购物app_个人中心"></a>购物app_个人中心</h3><hr>
<h5 id="url配置"><a href="#url配置" class="headerlink" title="url配置"></a>url配置</h5><h5 id="项目url"><a href="#项目url" class="headerlink" title="项目url"></a>项目url</h5><h6 id="应用url"><a href="#应用url" class="headerlink" title="应用url"></a>应用url</h6><h5 id="控制器（views"><a href="#控制器（views" class="headerlink" title="控制器（views)"></a>控制器（views)</h5><h5 id="个人中心的html页面"><a href="#个人中心的html页面" class="headerlink" title="个人中心的html页面"></a>个人中心的html页面</h5><h6 id="js配置"><a href="#js配置" class="headerlink" title="js配置"></a>js配置</h6>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/购物app_管理后台的制作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="karen2066">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/gg.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Karen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/购物app_管理后台的制作/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T09:16:20+08:00">
                2018-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="管理后台的制作"><a href="#管理后台的制作" class="headerlink" title="管理后台的制作"></a>管理后台的制作</h3><hr>
<h5 id="建立管理后台的应用"><a href="#建立管理后台的应用" class="headerlink" title="建立管理后台的应用"></a>建立管理后台的应用</h5><h5 id="管理后台模型"><a href="#管理后台模型" class="headerlink" title="管理后台模型"></a>管理后台模型</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserModel</span><span class="params">(models.Model)</span>:</span></span><br><span class="line"></span><br><span class="line">    username = models.CharField(max_length=<span class="number">32</span>, unique=<span class="keyword">True</span>)  <span class="comment"># 名称</span></span><br><span class="line"></span><br><span class="line">    password = models.CharField(max_length=<span class="number">256</span>)   <span class="comment">#  密码</span></span><br><span class="line"></span><br><span class="line">    email = models.CharField(max_length=<span class="number">64</span>, unique=<span class="keyword">True</span>)  <span class="comment"># 邮箱</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># False 代表女</span></span><br><span class="line"></span><br><span class="line">    sex = models.BooleanField(default=<span class="keyword">False</span>)  <span class="comment"># 性别</span></span><br><span class="line"></span><br><span class="line">    icon = models.ImageField(upload_to=<span class="string">'icons'</span>)  <span class="comment"># 头像</span></span><br><span class="line"></span><br><span class="line">    is_delete = models.BooleanField(default=<span class="keyword">False</span>)  <span class="comment"># 是否删除</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">    db_table = <span class="string">'axf_users'</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">UserTicketModel</span><span class="params">(models.Model)</span>:</span></span><br><span class="line"></span><br><span class="line">    user = models.ForeignKey(UserModel)  <span class="comment"># 关联用户</span></span><br><span class="line"></span><br><span class="line">    ticket = models.CharField(max_length=<span class="number">256</span>)   <span class="comment"># 密码</span></span><br><span class="line"></span><br><span class="line">    out_time = models.DateTimeField()  <span class="comment"># 过期时间</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">    db_table = <span class="string">'axf_users_ticket'</span></span><br></pre></td></tr></table></figure>
<h5 id="url映射"><a href="#url映射" class="headerlink" title="url映射"></a>url映射</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> user <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录</span></span><br><span class="line">url(<span class="string">r'^login/'</span>, views.login, name=<span class="string">'login'</span>),</span><br><span class="line"><span class="comment"># 注册</span></span><br><span class="line">url(<span class="string">r'^register/'</span>, views.register, name=<span class="string">'register'</span>),</span><br><span class="line"><span class="comment"># 注销</span></span><br><span class="line">url(<span class="string">r'^logout/'</span>, views.logout, name=<span class="string">'logout'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="控制器（views）"><a href="#控制器（views）" class="headerlink" title="控制器（views）"></a>控制器（views）</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.hashers <span class="keyword">import</span> make_password, check_password</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.core.urlresolvers <span class="keyword">import</span> reverse</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> user.models <span class="keyword">import</span> UserModel, UserTicketModel</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> utils.functions <span class="keyword">import</span> get_ticket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    注册</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'GET'</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'user/user_register.html'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line"></span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        email = request.POST.get(<span class="string">'email'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        icon = request.FILES.get(<span class="string">'icon'</span>)</span><br><span class="line">        <span class="comment"># 需要验证参数都不为空</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> all([username, email, password, icon]):</span><br><span class="line">            <span class="comment"># 验证不通过，提示参数不能为空，返回页面错误提示</span></span><br><span class="line">            msg = <span class="string">'参数不能为空'</span></span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'user/user_register.html'</span>, &#123;<span class="string">'msg'</span>: msg&#125;)</span><br><span class="line">        <span class="comment"># 加密password</span></span><br><span class="line">        password = make_password(password)</span><br><span class="line">        <span class="comment"># 创建</span></span><br><span class="line">        UserModel.objects.create(username=username,</span><br><span class="line">                                 password=password,</span><br><span class="line">                                 email=email,</span><br><span class="line">                                 icon=icon</span><br><span class="line">                                 )</span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(reverse(<span class="string">'user:login'</span>))</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    登录</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'GET'</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'user/user_login.html'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line"></span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        <span class="comment"># 验证用户是否存在</span></span><br><span class="line">        user = UserModel.objects.filter(username=username).first()</span><br><span class="line">        <span class="keyword">if</span> user:</span><br><span class="line">            <span class="comment"># 验证密码是否正确</span></span><br><span class="line">            <span class="keyword">if</span> check_password(password, user.password):</span><br><span class="line">                <span class="comment"># 1. 保存ticket在客户端</span></span><br><span class="line">                ticket = get_ticket()</span><br><span class="line">                response = HttpResponseRedirect(reverse(<span class="string">'axf:mine'</span>))</span><br><span class="line">                out_time = datetime.now() + timedelta(days=<span class="number">1</span>)</span><br><span class="line">                response.set_cookie(<span class="string">'ticket'</span>, ticket, expires=out_time)</span><br><span class="line">                <span class="comment"># 2. 保存ticket到服务端的user_ticket表中</span></span><br><span class="line">                UserTicketModel.objects.create(user=user,</span><br><span class="line">                                               out_time=out_time,</span><br><span class="line">                                               ticket=ticket)</span><br><span class="line">                <span class="keyword">return</span> response</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                msg = <span class="string">'密码错误'</span></span><br><span class="line">                <span class="keyword">return</span> render(request, <span class="string">'user/user_login.html'</span>, &#123;<span class="string">'msg'</span>: msg&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            msg = <span class="string">'用户不存在'</span></span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'user/user_login.html'</span>, &#123;<span class="string">'msg'</span>: msg&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">logout</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    注销</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'GET'</span>:</span><br><span class="line">        <span class="comment"># 注销，删除当前登录的用户的cookies中的ticket信息</span></span><br><span class="line">        response = HttpResponseRedirect(reverse(<span class="string">'user:login'</span>))</span><br><span class="line">        response.delete_cookie(<span class="string">'ticket'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/gg.png"
                alt="karen2066" />
            
              <p class="site-author-name" itemprop="name">karen2066</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">karen2066</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'manual') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
